<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <startup>
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.8" />
  </startup>

  <appSettings>
    <!-- ===== РЕЖИМЫ/ЭМУЛЯТОРЫ ===== -->
    <add key="UseEmulator" value="true" />
    <add key="ForceCardReadersInEmu" value="true" />
    <add key="BypassCardForRruTest" value="false" />

    <!-- ===== IRBIS: ПОДКЛЮЧЕНИЕ/БАЗЫ ===== -->
    <add key="connection-string" value="host=172.29.67.70;port=6666;user=09f00st;password=f00st;db=KAT%SERV09%;" />
    <add key="BooksDb" value="KAT%SERV09%" />
    <add key="ReadersDb" value="RDR" />

    <!-- ===== IRBIS: ФОРМАТЫ/МАСКИ ===== -->
    <add key="BriefFormat" value="@brief" />
    <add key="MaskMrg" value="09" />
    <add key="UseSubfieldR_ReturnPlace" value="true" />

    <!-- ===== ПОИСК: ВЫРАЖЕНИЯ ===== -->
    <add key="ExprReaderByUidList" value="&quot;RI={0}&quot;;&quot;RFID={0}&quot;;&quot;CCUID={0}&quot;" />
    <add key="ExprReaderByUid" value="&quot;RI={0}&quot;" />
    <add key="ExprReaderByItemRfid" value="&quot;H={0}&quot;" />
    <add key="ExprBookByInv" value="&quot;IN={0}&quot;" />
    <add key="ExprBookByRfid" value="&quot;H={0}&quot;" />

    <!-- ===== НОРМАЛИЗАЦИЯ UID/КЛЮЧЕЙ ===== -->
    <add key="UidUpperHex" value="true" />
    <add key="UidStripDelimiters" value="true" />
    <add key="MinUidHexLen" value="6" />
    <add key="ReaderUidField" value="30" />

    <!-- ===== ПОЛЯ ЭКЗЕМПЛЯРА ===== -->
    <add key="BookStatusTag" value="910" />
    <add key="BookStatusCode" value="a" />
    <add key="BookRfidCode" value="h" />

    <!-- ===== РИДЕРЫ (PC/SC) — карта петербуржца ===== -->
    <add key="AcrReaderName" value="ACS ACR1281 1S Dual Reader PICC" />

    <!-- ===== КОМ-РИДЕР КАРТ (ASCII), если нужен параллельно =====
         Оставь пустым, если используешь только UHFReader09 DLL. -->
    <add key="IqrfidPort" value="COM4" />
    <add key="BaudIqrfid" value="115200" />
    <!-- реальный LF: '\n' = &#10; -->
    <add key="NewLineIqrfid" value="&#10;" />
    <add key="IqrfidParity"    value="None" />
    <add key="IqrfidStopBits"  value="One" />
    <add key="IqrfidDataBits"  value="8" />
    <add key="IqrfidHandshake" value="None" />
    <add key="IqrfidDtr"       value="true" />
    <add key="IqrfidRts"       value="true" />

    <!-- ===== UHFReader09 (IQRFID-5102 / Chafon) как РИДЕР КАРТ =====
         UhfCardUidLength: 24 = взять первые 24 символа EPC; 0 = весь EPC -->
    <add key="UhfCardUidLength" value="24" />
    

    <!-- ===== RRU9816 (UHF через DLL, x86 процесс) — КНИГИ ===== -->
    <add key="RruPort" value="COM8" />
    <add key="RruBaudRate" value="57600" />

    <!-- ===== ДРУГОЕ ЖЕЛЕЗО ПО COM (обычно не нужно) ===== -->
    <add key="EnableBookScanners" value="false" />
    <add key="BookTakePort" value="" />
    <add key="BookReturnPort" value="" />
    <add key="BaudBookTake" value="9600" />
    <add key="BaudBookReturn" value="9600" />
    <add key="NewLineBookTake" value="&#13;&#10;" />
    <add key="NewLineBookReturn" value="&#13;&#10;" />

    <!-- ===== ARDUINO / ШКАФ ===== -->
    <add key="EnableArduino" value="true" />
    <add key="ArduinoPort" value="COM10" />
    <add key="BaudArduino" value="115200" />
    <!-- реальный LF: '\n' = &#10; -->
    <add key="NewLineArduino" value="&#10;" />

    <!-- ===== ТАЙМИНГИ / ДРЕБЕЗГ ===== -->
    <add key="ReadTimeoutMs" value="5000" />
    <add key="WriteTimeoutMs" value="1000" />
    <add key="AutoReconnectMs" value="3000" />
    <add key="DebounceMs" value="250" />
    <add key="BookDebounceMs" value="800" />

    <!-- ===== EPC как ключ книги (обычно false) ===== -->
    <add key="UseEpcBookKey" value="false" />

    <!-- ===== ЛОГИ ===== -->
    <add key="LogsDir" value="C:\SideProjects\RFIDShkafWithIRBIS\Logs" />
    <add key="DiagIqrfidProbe" value="false" />

    <!-- служебное -->
    <add key="ClientSettingsProvider.ServiceUri" value="" />
  </appSettings>

  <system.web>
    <membership defaultProvider="ClientAuthenticationMembershipProvider">
      <providers>
        <add name="ClientAuthenticationMembershipProvider"
             type="System.Web.ClientServices.Providers.ClientFormsAuthenticationMembershipProvider, System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
             serviceUri="" />
      </providers>
    </membership>
    <roleManager defaultProvider="ClientRoleProvider" enabled="true">
      <providers>
        <add name="ClientRoleProvider"
             type="System.Web.ClientServices.Providers.ClientRoleProvider, System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
             serviceUri="" cacheTimeout="86400" />
      </providers>
    </roleManager>
  </system.web>
</configuration>
