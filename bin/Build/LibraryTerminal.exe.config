<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <startup>
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.8" />
  </startup>

  <appSettings>
    <!-- Тест без карточного ридера: скан книги запускает процесс сам -->
    <add key="BypassCardForRruTest" value="true" />

    <!-- === IRBIS === -->
    <add key="connection-string" value="host=127.0.0.1;port=6666;user=MASTER;password=MASTERKEY;db=IBIS" />
    <add key="BooksDb" value="IBIS" />
    <add key="ReadersDb" value="RDR" />

    <!-- Поисковые выражения -->
    <add key="ExprReaderByUidList" value="&quot;RI={0}&quot;;&quot;RFID={0}&quot;;&quot;CCUID={0}&quot;" />
    <add key="ExprBookByInv" value="&quot;IN={0}&quot;" />
    <add key="ExprBookByRfid" value="&quot;IN={0}&quot;" />
    <add key="ExprReaderByItemRfid" value="&quot;H={0}&quot;" />

    <!-- Нормализация UID -->
    <add key="UidUpperHex" value="true" />
    <add key="UidStripDelimiters" value="true" />
    <add key="ReaderUidField" value="30" />

    <!-- Форматы/маски -->
    <add key="BriefFormat" value="@brief" />
    <add key="MaskMrg" value="09" />
    <add key="UseSubfieldR_ReturnPlace" value="true" />

    <!-- Поля экземпляра -->
    <add key="BookStatusTag" value="910" />
    <add key="BookStatusCode" value="a" />
    <add key="BookRfidCode" value="h" />

    <!-- Режимы -->
    <add key="UseEmulator" value="true" />
    <add key="DryRun" value="true" />
    <add key="DemoKeys" value="true" />

    <!-- === ПОРТЫ === -->
    <!-- Важно: книжные COM-ридеры/Arduino отключены, чтобы не занимали порт -->
    <add key="BookTakePort" value="" />
    <add key="BookReturnPort" value="" />
    <add key="ArduinoPort" value="" />

    <!-- RRU9816: пока пусто -> AutoOpenComPort найдёт реальный порт сам.
         Когда определишь точный порт (например, COM5), пропиши его сюда. -->
    <add key="RruPort" value="COM5" />
    <add key="RruBaudRate" value="57600" />

    <!-- Скорости прочего оборудования (не используется сейчас) -->
    <add key="BaudBookTake" value="9600" />
    <add key="BaudBookReturn" value="9600" />
    <add key="BaudArduino" value="115200" />
    <add key="BaudIqrfid" value="9600" />

    <!-- Разделители строк -->
    <add key="NewLineRru" value="\r\n" />
    <add key="NewLineBookTake" value="\r\n" />
    <add key="NewLineBookReturn" value="\r\n" />
    <add key="NewLineArduino" value="\n" />
    <add key="NewLineIqrfid" value="\r\n" />

    <!-- Тайминги -->
    <add key="ReadTimeoutMs" value="1000" />
    <add key="WriteTimeoutMs" value="1000" />
    <add key="AutoReconnectMs" value="1500" />
    <add key="DebounceMs" value="250" />

    <!-- EPC как ключ в базе -->
    <add key="UseEpcBookKey" value="false" />

    <!-- Логи -->
    <add key="LogsDir" value="C:\SideProjects\RFID-Library\Logs" />

    <!-- служебное (оставляем как было) -->
    <add key="ClientSettingsProvider.ServiceUri" value="" />
  </appSettings>

  <!-- этот раздел не критичен для WinForms, но пусть остаётся -->
  <system.web>
    <membership defaultProvider="ClientAuthenticationMembershipProvider">
      <providers>
        <add name="ClientAuthenticationMembershipProvider"
             type="System.Web.ClientServices.Providers.ClientFormsAuthenticationMembershipProvider, System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
             serviceUri="" />
      </providers>
    </membership>
    <roleManager defaultProvider="ClientRoleProvider" enabled="true">
      <providers>
        <add name="ClientRoleProvider"
             type="System.Web.ClientServices.Providers.ClientRoleProvider, System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
             serviceUri="" cacheTimeout="86400" />
      </providers>
    </roleManager>
  </system.web>
</configuration>
