<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <startup>
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.8" />
    
  </startup>

  <appSettings>
    <!-- ===== РЕЖИМЫ/ЭМУЛЯТОРЫ ===== -->
    <!-- показывать панель эмулятора (UID/метка) -->
    <add key="UseEmulator" value="true" />
    <!-- при эмуляторе всё равно инициализировать реальные ридеры -->
    <add key="ForceCardReadersInEmu" value="true" />
    <!-- обход карты: сразу к сканированию книги (true) -->
    <add key="BypassCardForRruTest" value="false" />
    

    <!-- ===== IRBIS: ПОДКЛЮЧЕНИЕ/БАЗЫ ===== -->
    <!-- строка подключения -->
    <add key="connection-string" value="host=127.0.0.1;port=6666;user=MASTER;password=MASTERKEY;db=IBIS" />
    <!-- база книг -->
    <add key="BooksDb" value="IBIS" />
    <!-- база читателей -->
    <add key="ReadersDb" value="RDR" />
    

    <!-- ===== IRBIS: ФОРМАТЫ/МАСКИ ===== -->

    <!-- формат краткой записи (читатель) -->
    <add key="BriefFormat" value="@brief" />
    <!-- код места/маска для поля 40 и возврата -->
    <add key="MaskMrg" value="09" />
    <!-- при возврате писать 40^r (место возврата) -->
    <add key="UseSubfieldR_ReturnPlace" value="true" />
   

    <!-- ===== ПОИСК: ВЫРАЖЕНИЯ ===== -->
    <!-- поиск читателя по UID (список индексов) -->
    <add key="ExprReaderByUidList" value="&quot;RI={0}&quot;;&quot;RFID={0}&quot;;&quot;CCUID={0}&quot;" />
    <!-- доп. одиночный шаблон -->
    <add key="ExprReaderByUid" value="&quot;RI={0}&quot;" />
    <!-- поиск читателя по книге (возврат) -->
    <add key="ExprReaderByItemRfid" value="&quot;H={0}&quot;" />
    <!-- поиск книги по инвентарному -->
    <add key="ExprBookByInv" value="&quot;IN={0}&quot;" />
    <!-- поиск книги по RFID (910^h / индекс H) -->
    <add key="ExprBookByRfid" value="&quot;H={0}&quot;" />
    
    <!-- ===== НОРМАЛИЗАЦИЯ UID/КЛЮЧЕЙ ===== -->
    <!-- переводить UID в верхний HEX -->
    <add key="UidUpperHex" value="true" />
    <!-- убирать двоеточия/дефисы/пробелы -->
    <add key="UidStripDelimiters" value="true" />
    <!-- не используется напрямую; оставить 30 -->
    <add key="ReaderUidField" value="30" />
    
    <!-- ===== ПОЛЯ ЭКЗЕМПЛЯРА ===== -->
    <!-- тег статуса экземпляра -->
    <add key="BookStatusTag" value="910" />
    <!-- 910^a: 0 — в наличии, 1 — выдана -->
    <add key="BookStatusCode" value="a" />
    <!-- 910^h: RFID ключ -->
    <add key="BookRfidCode" value="h" />
    

    <!-- ===== РИДЕРЫ (PC/SC) ===== -->
    <!-- имя PC/SC ридера (пусто = авто) -->
    <add key="AcrReaderName" value="ACS ACR1281 1S Dual Reader PICC" />
    

    <!-- ===== КОМ-РИДЕР КАРТ (IQRFID-5102, опционально) ===== -->
    <!-- COM-порт (если используется) -->
    <add key="IqrfidPort" value="" />
    <!-- скорость IQRFID -->
    <add key="BaudIqrfid" value="57600" />
    <!-- разделитель строк IQRFID -->
    <add key="NewLineIqrfid" value="\r\n" />
    
    <!-- ===== RRU9816 (UHF через DLL, x86 процесс) ===== -->
    <!-- COM-порт RRU9816 -->
    <add key="RruPort" value="COM5" />
    <!-- скорость RRU9816 -->
    <add key="RruBaudRate" value="57600" />
   

    <!-- ===== ДРУГОЕ ЖЕЛЕЗО ПО COM (обычно не нужно) ===== -->
    <!-- включить COM-ридеры книг -->
    <add key="EnableBookScanners" value="false" />
    <!-- порт «выдача» -->
    <add key="BookTakePort" value="" />
    <!-- порт «возврат» -->
    <add key="BookReturnPort" value="" />
    <!-- скорость «выдача» -->
    <add key="BaudBookTake" value="9600" />
    <!-- скорость «возврат» -->
    <add key="BaudBookReturn" value="9600" />
    <!-- разделитель строк «выдача» -->
    <add key="NewLineBookTake" value="\r\n" />
    <!-- разделитель строк «возврат» -->
    <add key="NewLineBookReturn" value="\r\n" />
    
    <!-- ===== ARDUINO / ШКАФ ===== -->
    <!-- включить управление шкафом -->
    <add key="EnableArduino" value="false" />
    <!-- COM-порт Arduino -->
    <add key="ArduinoPort" value="" />
    <!-- скорость Arduino -->
    <add key="BaudArduino" value="115200" />
    <!-- разделитель строк Arduino -->
    <add key="NewLineArduino" value="\n" />
    

    <!-- ===== ТАЙМИНГИ / ДРЕБЕЗГ ===== -->
    <!-- таймаут чтения COM -->
    <add key="ReadTimeoutMs" value="1000" />
    <!-- таймаут записи COM -->
    <add key="WriteTimeoutMs" value="1000" />
    <!-- пауза перед переподключением -->
    <add key="AutoReconnectMs" value="1500" />
    <!-- антидребезг COM-ридеров (мс) -->
    <add key="DebounceMs" value="250" />
    <!-- антидребезг метки книги (мс) -->
    <add key="BookDebounceMs" value="800" />
    

    <!-- ===== EPC как ключ книги (обычно false) ===== -->
    <!-- true = ключ по EPC (библиотека+серийный) -->
    <add key="UseEpcBookKey" value="false" />
    

    <!-- ===== ЛОГИ ===== -->
    <!-- каталог логов -->
    <add key="LogsDir" value="C:\SideProjects\RFIDShkafWithIRBIS\Logs" />
   

    <!-- служебное -->
    <!-- не используется -->
    <add key="ClientSettingsProvider.ServiceUri" value="" />
    
  </appSettings>

  <!-- служебный web-блок .NET (для Client Services) -->
  <system.web>
    <membership defaultProvider="ClientAuthenticationMembershipProvider">
      <providers>
        <add name="ClientAuthenticationMembershipProvider"
             type="System.Web.ClientServices.Providers.ClientFormsAuthenticationMembershipProvider, System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
             serviceUri="" />
        <!-- не используется -->
      </providers>
    </membership>
    <roleManager defaultProvider="ClientRoleProvider" enabled="true">
      <providers>
        <add name="ClientRoleProvider"
             type="System.Web.ClientServices.Providers.ClientRoleProvider, System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
             serviceUri="" cacheTimeout="86400" />
        <!-- не используется -->
      </providers>
    </roleManager>
  </system.web>
</configuration>
