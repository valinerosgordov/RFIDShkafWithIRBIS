<?xml version="1.0" encoding="utf-8"?>
<configuration>
	<startup>
		<!-- .NET 4.8 -->
		<supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.8" />
	</startup>

	<appSettings>

		<!--
    ================================
    П Р О Ф И Л И  (подсказка)
    ================================
    ► DEMO (эмуляторы + без записи):
        UseEmulator=true
        ForceCardReadersInEmu=true
        DemoKeys=true
        DryRun=true
        BypassCardForRruTest=true   (можно сразу метку без карты)
    ► ЖЕЛЕЗО / ТЕСТ (карта → книга, без записи):
        UseEmulator=false
        DemoKeys=false
        ForceCardReadersInEmu=false
        DryRun=true
        BypassCardForRruTest=false
    ► БОЕВОЙ (реальная запись в ИРБИС):
        UseEmulator=false
        DemoKeys=false
        ForceCardReadersInEmu=false
        DryRun=false
        BypassCardForRruTest=false
    -->

		<!-- === РЕЖИМ РАБОТЫ / ЭМУЛЯТОРЫ === -->
		<add key="UseEmulator" value="false" />
		<!-- Показать нижнюю панель эмулятора (UID/метка) -->
		<add key="ForceCardReadersInEmu" value="false" />
		<!-- Если эмулятор включён, всё равно инициализировать реальные ридеры -->
		<add key="DemoKeys" value="true" />
		<!-- Горячие клавиши: D1..D4, F8/F9 и т.п. -->
		<add key="DryRun" value="true" />
		<!-- Без записи в БД: только проверки и экран успеха -->
		<add key="BypassCardForRruTest" value="false" />
		<!-- Обход карты: можно сразу сканить книгу (true) / требовать карту (false) -->

		<!-- === IRBIS: подключение и базы === -->
		<add key="connection-string" value="host=127.0.0.1;port=6666;user=MASTER;password=MASTERKEY;db=IBIS" />
		<add key="BooksDb" value="IBIS" />
		<!-- База книг -->
		<add key="ReadersDb" value="RDR" />
		<!-- База читателей -->

		<!-- === IRBIS: форматы и маски === -->
		<add key="BriefFormat" value="@brief" />
		<!-- Формат краткого вывода -->
		<add key="MaskMrg" value="09" />
		<!-- Шифр/код места/маска для поля 40 и возврата -->
		<add key="UseSubfieldR_ReturnPlace" value="true" />
		<!-- При возврате писать 40^r (место возврата) -->

		<!-- === ПОИСК: выражения для читателей/книг ===
         {0} — подставляется UID/метка/инв. -->
		<add key="ExprReaderByUidList" value="&quot;RI={0}&quot;;&quot;RFID={0}&quot;;&quot;CCUID={0}&quot;" />
		<!-- перечисление индексов для поиска читателя -->
		<add key="ExprReaderByUid" value="&quot;RI={0}&quot;" />
		<!-- одиночный шаблон (доп. к списку) -->
		<add key="ExprReaderByItemRfid" value="&quot;H={0}&quot;" />
		<!-- поиск читателя по книге (для возврата) -->

		<add key="ExprBookByInv" value="&quot;IN={0}&quot;" />
		<!-- поиск книги по инвентарному -->
		<add key="ExprBookByRfid" value="&quot;H={0}&quot;" />
		<!-- поиск книги по RFID в 910^h (вариант индекса H=) -->

		<!-- === НОРМАЛИЗАЦИЯ UID/ключей === -->
		<add key="UidUpperHex" value="true" />
		<!-- Переводить UID/ключи в верхний HEX -->
		<add key="UidStripDelimiters" value="true" />
		<!-- Убирать : - и пробелы -->
		<add key="ReaderUidField" value="30" />
		<!-- На случай форматов/логики, где нужен номер поля (оставь 30) -->

		<!-- === ПОЛЯ ЭКЗЕМПЛЯРА (книга) === -->
		<add key="BookStatusTag" value="910" />
		<!-- Тег статуса -->
		<add key="BookStatusCode" value="a" />
		<!-- 910^a: 0 — в наличии, 1 — выдана -->
		<add key="BookRfidCode" value="h" />
		<!-- 910^h: RFID ключ -->

		<!-- === РИДЕРЫ (карты) === -->
		<add key="AcrReaderName" value="ACS ACR1281 1S Dual Reader PICC" />
		<!-- Имя PC/SC ридера (оставь пустым для авто) -->

		<!-- === КОМ-ридер карт (IQRFID-5102) — опционально -->
		<add key="IqrfidPort" value="COM15" />
		<add key="BaudIqrfid" value="57600" />
		<add key="NewLineIqrfid" value="\r\n" />

		<!-- === РИДЕР КНИГ (UHF RRU9816 через вендорскую DLL, ТОЛЬКО x86 процесс) -->
		<add key="RruPort" value="COM2" />
		<add key="RruBaudRate" value="57600" />

		<!-- === ДРУГОЕ ЖЕЛЕЗО ПО COM (обычно не нужно) ===
         Включается флагами EnableBookScanners / EnableArduino -->
		<add key="EnableBookScanners" value="false" />
		<!-- Включить COM-ридеры книг (если есть свои по UART) -->
		<add key="BookTakePort" value="" />
		<add key="BookReturnPort" value="" />
		<add key="BaudBookTake" value="9600" />
		<add key="BaudBookReturn" value="9600" />
		<add key="NewLineBookTake" value="\r\n" />
		<add key="NewLineBookReturn" value="\r\n" />

		<add key="EnableArduino" value="false" />
		<!-- Управление шкафом/шторкой и т.п. -->
		<add key="ArduinoPort" value="" />
		<add key="BaudArduino" value="115200" />
		<add key="NewLineArduino" value="\n" />

		<!-- === ТАЙМИНГИ / ДРЕБЕЗГ === -->
		<add key="ReadTimeoutMs" value="1000" />
		<add key="WriteTimeoutMs" value="1000" />
		<add key="AutoReconnectMs" value="1500" />
		<add key="DebounceMs" value="250" />
		<!-- Антидребезг для COM-ридеров -->
		<add key="BookDebounceMs" value="800" />
		<!-- Антидребезг метки книги на экранах выдачи/возврата -->

		<!-- === EPC как ключ (обычно НЕ нужно) === -->
		<add key="UseEpcBookKey" value="false" />

		<!-- === ЛОГИ === -->
		<add key="LogsDir" value="C:\Users\admin\Documents\GitHub\RFIDShkafWithIRBIS\Logs" />

		<!-- служебное -->
		<add key="ClientSettingsProvider.ServiceUri" value="" />
	</appSettings>

	<!-- служебный web-блок .NET -->
	<system.web>
		<membership defaultProvider="ClientAuthenticationMembershipProvider">
			<providers>
				<add name="ClientAuthenticationMembershipProvider"
					 type="System.Web.ClientServices.Providers.ClientFormsAuthenticationMembershipProvider, System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
					 serviceUri="" />
			</providers>
		</membership>
		<roleManager defaultProvider="ClientRoleProvider" enabled="true">
			<providers>
				<add name="ClientRoleProvider"
					 type="System.Web.ClientServices.Providers.ClientRoleProvider, System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
					 serviceUri="" cacheTimeout="86400" />
			</providers>
		</roleManager>
	</system.web>
</configuration>
